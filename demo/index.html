<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<!doctype html>
<html>
<head>
  <title>paper-linear-progress demo</title>

  <meta name="viewport"
        content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

  <link rel="import" href="../../promise-polyfill/promise-polyfill-lite.html">
  <link rel="import" href="../../iron-flex-layout/classes/iron-flex-layout.html">
  <link rel="import" href="../../paper-styles/color.html">
  <link rel="import" href="../../paper-styles/demo-pages.html">
  <link rel="import" href="../paper-linear-progress.html">
  <link rel="import" href="../../paper-button/paper-button.html">
  <link rel="import" href="../../paper-input/paper-input.html">
  <link rel="import" href="../../paper-checkbox/paper-checkbox.html">
  <link rel="import" href="../../iron-demo-helpers/demo-snippet.html">

  <style is="custom-style">
    body {
      padding: 40px;
    }

    /* Separate adjacent linear progress elements */
    paper-linear-progress + paper-linear-progress {
      margin-top: 1em;
    }

    paper-linear-progress.blue {
      --paper-linear-progress-progress-bar-color: var(--paper-light-blue-500);
      --paper-linear-progress-buffer-bar-color: var(--paper-light-blue-100);
    }

    paper-linear-progress.red {
      --paper-linear-progress-progress-bar-color: var(--paper-red-500);
      --paper-linear-progress-buffer-bar-color: var(--paper-red-100);
    }

    paper-linear-progress.orange {
      --paper-linear-progress-progress-bar-color: var(--paper-orange-500);
      --paper-linear-progress-buffer-bar-color: var(--paper-orange-100);
    }

    paper-linear-progress.green {
      --paper-linear-progress-progress-bar-color: var(--paper-light-green-500);
      --paper-linear-progress-buffer-bar-color: var(--paper-light-green-100);
    }

    paper-linear-progress.bigger {
      --paper-linear-progress-height: 8px;
    }

    paper-linear-progress.smaller {
      --paper-linear-progress-height: 2px;
    }
  </style>

</head>
<body unresolved>
  <h4>Progress bar</h4>
  <demo-snippet>
    <template>
      <paper-linear-progress closed></paper-linear-progress><br>
      <paper-button raised onclick="startProgress();">Start</paper-button>
      <script>
        var progress = document.querySelector('paper-linear-progress');
        var button = document.querySelector('paper-button');
        window.addEventListener('WebComponentsReady', startProgress);

        function startProgress() {
          var exampleProgressValues = [10, 25, 38, 56, 81, 100];
          exampleProgressValues.reduce(function(promise, nextValue) {
            return promise
                     .then(sleepForAWhile())
                     .then(setProgress(nextValue));
          }, start()).then(finish);

          function start() {
            return new Promise(function(resolve) {
              button.disabled = true;
              progress.value = 0;
              progress.indeterminate = true;
              progress.reversed = true;
              progress.closed = false;

              setTimeout(function() {
                progress.indeterminate = false;
                progress.reversed = false;
                progress.value = 0;
                resolve();
              }, 3000)
            });
          }

          function sleepForAWhile() {
            var min = 50, max = 500;
            var ms = Math.random() * (max - min) + min;
            return function() {
              return new Promise(function(resolve) {
                setTimeout(resolve, ms);
              });
            };
          }

          function setProgress(v) {
            return function() {
              progress.value = v;
            };
          }

          function finish() {
            var transitionEndEvents = ['transitionend', 'webkitTransitionEnd'];
            return new Promise(function(resolve) {
              transitionEndEvents.forEach(function(eventName) {
                progress.addEventListener(eventName, onTransitionEnd);
              });
              progress.closed = true;
              resolve();

              function onTransitionEnd() {
                button.disabled = false;
                transitionEndEvents.forEach(function(eventName) {
                  progress.removeEventListener(eventName, onTransitionEnd);
                });
              }
            });
          }
        }
      </script>
    </template>
  </demo-snippet>

  <h4>Interactive Demo</h4>
  <demo-snippet>
    <template>
      <style>
        .layout > * {
          margin-right: 4px;
        }

        .layout > *:last-child {
          margin-right: 0;
        }

        .layout > paper-input {
          min-width: 100px;
        }
      </style>
      <div class="layout horizontal center-center">
        <paper-linear-progress class="flex-3" id="demoProgressElement"></paper-linear-progress>
        <span>Value: <span id="valueIndicator"></span></span>
        <span>Buffer Value: <span id="bufferValueIndicator"></span></span>
      </div>
      <div class="layout horizontal wrap">
        <paper-button class="flex-none" raised id="showBtn">Show</paper-button>
        <paper-button class="flex-none" raised id="hideBtn">Hide</paper-button>
      </div>
      <div class="layout horizontal">
        <paper-input id="valueInput"
                     label="value"
                     type="number"
                     min="0"
                     max="100"
                     step="10">
        </paper-input>
        <paper-input id="bufferValueInput"
                     label="buffer value"
                     type="number"
                     min="0"
                     max="100"
                     step="10">
        </paper-input>
      </div>
      <div class="layout horizontal">
        <paper-checkbox class="flex-none" id="toggleIndeterminate">
          Toggle Indeterminate
        </paper-checkbox>
        <paper-checkbox id="toggleReversed">Toggle Reverse</paper-checkbox>
        <paper-checkbox id="toggleBuffering">Toggle Buffering</paper-checkbox>
      </div>
      <script>
        function initInteractiveDemo() {
          var progressElement = document.querySelector('#demoProgressElement');
          var valueIndicator = document.querySelector('#valueIndicator');
          var bufferValueIndicator = document.querySelector('#bufferValueIndicator');
          var showBtn = document.querySelector('#showBtn');
          var hideBtn = document.querySelector('#hideBtn');
          var valueInput = document.querySelector('#valueInput');
          var bufferValueInput = document.querySelector('#bufferValueInput');
          var toggleIndeterminate = document.querySelector('#toggleIndeterminate');
          var toggleReversed = document.querySelector('#toggleReversed');
          var toggleBuffering = document.querySelector('#toggleBuffering');

          valueIndicator.textContent = progressElement.value;
          bufferValueIndicator.textContent = progressElement.bufferValue;
          valueInput.value = progressElement.value;
          bufferValueInput.value = progressElement.bufferValue;

          progressElement.addEventListener('paper-linear-progress-value-change', function(e) {
            valueIndicator.textContent = e.detail.value;
          });

          progressElement.addEventListener('paper-linear-progress-buffer-value-change', function(e) {
            bufferValueIndicator.textContent = e.detail.bufferValue;
          });

          showBtn.addEventListener('click', function() {
            progressElement.closed = false;
          });

          hideBtn.addEventListener('click', function() {
            progressElement.closed = true;
          });

          valueInput.addEventListener('change', function() {
            progressElement.value = valueInput.value;
          });

          bufferValueInput.addEventListener('change', function() {
            progressElement.bufferValue = bufferValueInput.value;
          });

          toggleIndeterminate.addEventListener('change', function() {
            progressElement.indeterminate = toggleIndeterminate.checked;
          });

          toggleReversed.addEventListener('change', function() {
            progressElement.reversed = toggleReversed.checked;
          });

          toggleBuffering.addEventListener('change', function() {
            progressElement.buffering = toggleBuffering.checked;
          });
        }

        window.addEventListener('WebComponentsReady', initInteractiveDemo);
      </script>
    </template>
  </demo-snippet>

  <h4>Indeterminate</h4>
  <demo-snippet>
    <template>
      <paper-linear-progress indeterminate></paper-linear-progress>
      <paper-linear-progress class="blue" indeterminate reversed></paper-linear-progress>
    </template>
  </demo-snippet>

  <h4>Reversed</h4>
  <demo-snippet>
    <template>
      <paper-linear-progress reversed value="80"></paper-linear-progress>
    </template>
  </demo-snippet>

  <h4>Buffering</h4>
  <demo-snippet>
    <template>
      <paper-linear-progress buffering value="40" buffer-value="70"></paper-linear-progress>
    </template>
  </demo-snippet>

  <h4>Color</h4>
  <demo-snippet>
    <template>
      <paper-linear-progress value="40" class="blue"></paper-linear-progress>
      <paper-linear-progress value="80" class="red"></paper-linear-progress>
      <paper-linear-progress reversed
                             buffering
                             value="20"
                             buffer-value="70"
                             class="orange">
      </paper-linear-progress>
      <paper-linear-progress value="90" class="green"></paper-linear-progress>
    </template>
  </demo-snippet>

  <h4>Size</h4>
  <demo-snippet>
    <template>
      <paper-linear-progress class="bigger" indeterminate reversed></paper-linear-progress>
      <paper-linear-progress class="smaller green"
                             value="40"
                             buffer-value="80"
                             buffering>
      </paper-linear-progress>
    </template>
  </demo-snippet>
</body>
</html>
